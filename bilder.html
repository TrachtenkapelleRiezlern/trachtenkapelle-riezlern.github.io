<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bilder &amp; Videos – Trachtenkapelle Riezlern</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/svg+xml" href="images/logo.svg" />
</head>
<body>
<div id="site-header"></div>
<div style="height:var(--nav-height);"></div>

<section style="background:var(--white);padding-top:48px;">
  <div class="section-label">Fotoalben</div>
  <h2 class="section-title">Bilder aus dem Vereinsleben</h2>
  <p class="about-text" style="margin-bottom:40px;">Klick auf ein Album um alle Fotos zu sehen.</p>
  <div class="alben-grid" id="albenGrid">
    <div class="termine-loading">Alben werden geladen…</div>
  </div>
</section>

<section class="insta-section" id="instagram" style="background:var(--cream);">
  <div class="section-header">
    <div>
      <div class="section-label">Social Media</div>
      <h2 class="section-title">Aktuelle Bilder auf Instagram</h2>
    </div>
    <a href="https://www.instagram.com/trachtenkapelle_riezlern/" target="_blank" class="text-link" rel="noopener">@trachtenkapelle_riezlern →</a>
  </div>
  <div class="insta-embed">
    <div class="insta-placeholder">
      <p>Folge uns auf Instagram für aktuelle Bilder und Eindrücke.</p>
      <a href="https://www.instagram.com/trachtenkapelle_riezlern/" target="_blank" class="btn btn-green" rel="noopener">Auf Instagram folgen</a>
    </div>
  </div>
</section>

<div id="site-footer"></div>
<script src="main.js"></script>
<script>
// Dynamisch alle Alben aus alben/index.json laden
fetch('images/gallery/alben/index.json')
  .then(r => r.json())
  .then(alben => renderAlben(alben))
  .catch(() => {
    document.getElementById('albenGrid').innerHTML =
      '<p style="color:var(--text-mid);">Keine Alben gefunden. Bitte build_alben.py ausführen.</p>';
  });

function renderAlben(alben) {
  const grid = document.getElementById('albenGrid');
  if (!alben.length) {
    grid.innerHTML = '<p style="color:var(--text-mid);">Noch keine Alben vorhanden.</p>';
    return;
  }
  grid.innerHTML = alben.map(a => `
    <a href="gallery.html?album=${a.id}" class="album-card">
      <div class="album-thumb-wrap">
        <img src="images/gallery/alben/${a.id}/titel.jpg" alt="${a.titel}" class="album-thumb" loading="lazy"
             onerror="this.style.display='none';this.nextElementSibling.style.display='flex'" />
        <div class="album-thumb-placeholder" style="display:none;">&#127926;</div>
        <div class="album-overlay">
          <span class="album-overlay-count">${a.anzahl} Fotos</span>
        </div>
      </div>
      <div class="album-info">
        <div class="album-datum">${a.jahr || ''}</div>
        <div class="album-titel">${a.titel}</div>
        <div class="album-count">${a.anzahl} Bilder</div>
      </div>
    </a>`).join('');
}
</script>
</body>
</html>